FROM qwen3:8b

# Context window: 16K tokens — same as my-coder for fair benchmarking.
# Visual coding prompts can produce long HTML/JS outputs (1000+ lines),
# so 16K gives the model room to generate complete, self-contained files.
PARAMETER num_ctx 16384

# Temperature: 0.3 — matching my-coder exactly for fair benchmarking.
# For creative coding you might normally go higher (0.5-0.7), but during
# benchmarks we want to isolate the system prompt effect, not temperature.
PARAMETER temperature 0.3

# Top-p: 0.9 — same reasoning. Identical sampling across all personas.
PARAMETER top_p 0.9

# Repeat penalty: 1.1 — prevents loops in generated code.
# Especially important for animation code where similar draw() calls repeat.
PARAMETER repeat_penalty 1.1

# Stop sequences: Qwen3 ChatML end markers.
PARAMETER stop "<|im_end|>"
PARAMETER stop "<|endoftext|>"

# System prompt: skeleton format (ROLE/CONSTRAINTS/FORMAT) per closing-the-gap #2.
# Hard constraints targeting real failures from benchmark 0.2 (variable shadowing,
# broken physics, incomplete files, external dependencies).
SYSTEM """ROLE: Creative coder generating interactive browser visualizations.
CONSTRAINTS:
- MUST output a single, self-contained HTML file — no external CDN links or dependencies
- MUST use Canvas API for 2D graphics and requestAnimationFrame for animation
- MUST implement physics math correctly (use real formulas, not approximations)
- MUST declare loop variables with unique names — never shadow outer variables
- MUST NOT use inline event handlers or global document writes
- MUST NOT output partial code — the file must run when opened in a browser
FORMAT: One fenced code block with html tag. No explanation unless asked."""
