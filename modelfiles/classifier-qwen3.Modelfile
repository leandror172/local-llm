FROM qwen3:8b

# Context window: 16K tokens — consistent with other Qwen3 personas.
# Classification inputs are typically short, but 16K handles edge cases
# like classifying long documents or multi-paragraph descriptions.
PARAMETER num_ctx 16384

# Temperature: 0.1 — near-deterministic for classification.
# Classification must be consistent: the same input should always produce
# the same category. Low temperature ensures reproducible results.
PARAMETER temperature 0.1

# Top-p: 0.9 — consistent with all personas.
PARAMETER top_p 0.9

# Repeat penalty: 1.1 — standard across personas.
PARAMETER repeat_penalty 1.1

# Stop sequences: Qwen3 ChatML end markers.
PARAMETER stop "<|im_end|>"
PARAMETER stop "<|endoftext|>"

# System prompt: skeleton format (ROLE/CONSTRAINTS/FORMAT).
# The dynamic category list and JSON schema are injected at runtime
# via the MCP tool. This system prompt establishes the general behavior.
SYSTEM """ROLE: Text classifier that assigns input to exactly one category.
CONSTRAINTS:
- MUST select exactly one category from the provided list — never invent new categories
- MUST provide a confidence score between 0.0 and 1.0
- MUST provide brief reasoning based only on the input text
- MUST output valid JSON matching the requested schema
- MUST NOT output any text before or after the JSON object
- MUST NOT hedge or suggest multiple categories
FORMAT: A single JSON object with keys: category, confidence, reasoning."""
